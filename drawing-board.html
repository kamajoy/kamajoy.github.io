<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>å„¿ç«¥è¶£å‘³ç”»æ¿</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Microsoft YaHei", Arial, sans-serif;
        background: #f5f5f5;
        overflow: hidden;
        height: 100vh;
        display: flex;
        flex-direction: column;
      }

      /* é¡¶éƒ¨å·¥å…·æ  */
      .top-toolbar {
        background: white;
        padding: 10px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        z-index: 100;
        flex-wrap: wrap;
        gap: 10px;
      }

      .emoji-tools {
        display: flex;
        gap: 8px;
        align-items: center;
      }

      .emoji-btn {
        width: 50px;
        height: 50px;
        border: none;
        background: white;
        border-radius: 12px;
        cursor: pointer;
        font-size: 32px;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .emoji-btn:hover {
        transform: scale(1.15);
        background: #f0f0f0;
      }

      .emoji-btn:active {
        transform: scale(0.95);
      }

      .action-btns {
        display: flex;
        gap: 8px;
      }

      .action-btn {
        width: 50px;
        height: 50px;
        border: none;
        background: white;
        border-radius: 12px;
        cursor: pointer;
        font-size: 24px;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .action-btn:hover {
        transform: scale(1.1);
        background: #f0f0f0;
      }

      /* ç”»å¸ƒåŒºåŸŸ */
      .canvas-container {
        flex: 1;
        background: white;
        position: relative;
        overflow: hidden;
      }

      canvas {
        display: block;
        width: 100%;
        height: 100%;
        cursor: crosshair;
        touch-action: none;
      }

      /* åº•éƒ¨å·¥å…·æ  */
      .bottom-toolbar {
        background: #ffd54f;
        padding: 15px 20px;
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 15px;
        box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
        z-index: 100;
      }

      .tool-btn {
        width: 60px;
        height: 60px;
        border: 3px solid white;
        background: white;
        border-radius: 50%;
        cursor: pointer;
        transition: all 0.3s;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 28px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      }

      .tool-btn:hover {
        transform: scale(1.15);
      }

      .tool-btn.active {
        border-color: #333;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        transform: scale(1.1);
      }

      .color-btn {
        width: 60px;
        height: 60px;
        border: 3px solid white;
        border-radius: 50%;
        cursor: pointer;
        transition: all 0.3s;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      }

      .color-btn:hover {
        transform: scale(1.15);
      }

      .color-btn.active {
        border-color: #333;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        transform: scale(1.2);
      }

      .brush-size {
        display: flex;
        align-items: center;
        gap: 10px;
        background: white;
        padding: 8px 15px;
        border-radius: 30px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      }

      .slider {
        width: 100px;
        height: 8px;
        border-radius: 4px;
        outline: none;
        cursor: pointer;
        -webkit-appearance: none;
        background: linear-gradient(to right, #ffb74d, #ff6b6b);
      }

      .slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: #333;
        cursor: pointer;
      }

      .slider::-moz-range-thumb {
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: #333;
        cursor: pointer;
        border: none;
      }

      .brush-preview {
        border-radius: 50%;
        border: 2px solid #999;
        transition: all 0.3s;
      }

      /* æç¤ºæ–‡æœ¬ */
      .hint {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 24px;
        color: #999;
        pointer-events: none;
        text-align: center;
        z-index: 1;
      }

      .hint.hidden {
        display: none;
      }
    </style>
  </head>
  <body>
    <!-- é¡¶éƒ¨å·¥å…·æ  -->
    <div class="top-toolbar">
      <div class="emoji-tools">
        <button class="emoji-btn" onclick="drawDog()" title="ğŸ¶ å°ç‹—">
          ğŸ¶
        </button>
        <button class="emoji-btn" onclick="drawCat()" title="ğŸ± å°çŒ«">
          ğŸ±
        </button>
        <button class="emoji-btn" onclick="drawFish()" title="ğŸŸ å°é±¼">
          ğŸŸ
        </button>
        <button class="emoji-btn" onclick="drawFlower()" title="ğŸŒ¸ èŠ±æœµ">
          ğŸŒ¸
        </button>
        <button class="emoji-btn" onclick="drawTree()" title="ğŸŒ³ æ ‘">ğŸŒ³</button>
        <button class="emoji-btn" onclick="drawCar()" title="ğŸš— æ±½è½¦">
          ğŸš—
        </button>
        <button class="emoji-btn" onclick="drawSun()" title="â˜€ï¸ å¤ªé˜³">
          â˜€ï¸
        </button>
        <button class="emoji-btn" onclick="drawHouse()" title="ğŸ  æˆ¿å­">
          ğŸ 
        </button>
        <button class="emoji-btn" onclick="drawRocket()" title="ğŸš€ ç«ç®­">
          ğŸš€
        </button>
        <button class="emoji-btn" onclick="drawSteve()" title="ğŸ§± å²è’‚å¤«">
          ğŸ§±
        </button>
        <button class="emoji-btn" onclick="drawCreeper()" title="ğŸ’š è‹¦åŠ›æ€•">
          ğŸ’š
        </button>
        <button class="emoji-btn" onclick="drawDiamond()" title="ğŸ’ é’»çŸ³">
          ğŸ’
        </button>
        <button class="emoji-btn" onclick="drawGrass()" title="ğŸŸ© è‰æ–¹å—">
          ğŸŸ©
        </button>
        <button class="emoji-btn" onclick="drawTNT()" title="ğŸ’¥ TNT">ğŸ’¥</button>
        <button class="emoji-btn" onclick="drawSword()" title="âš”ï¸ å‰‘">
          âš”ï¸
        </button>
      </div>
      <div class="action-btns">
        <button class="action-btn" onclick="undo()" title="æ’¤é”€">â†¶</button>
        <button class="action-btn" onclick="redo()" title="é‡åš">â†·</button>
        <button class="action-btn" onclick="saveDrawing()" title="ä¿å­˜">
          ğŸ’¾
        </button>
        <button class="action-btn" onclick="clearCanvas()" title="æ¸…ç©º">
          ğŸ—‘ï¸
        </button>
      </div>
    </div>

    <!-- ç”»å¸ƒåŒºåŸŸ -->
    <div class="canvas-container">
      <div class="hint" id="hint">é€‰æ‹©ä¸€ä¸ªå›¾æ¡ˆæˆ–é¢œè‰²å¼€å§‹ç”»ç”»å§ï¼âœ¨</div>
      <canvas id="canvas"></canvas>
    </div>

    <!-- åº•éƒ¨å·¥å…·æ  -->
    <div class="bottom-toolbar">
      <button
        class="tool-btn active"
        id="brushBtn"
        onclick="selectTool('brush')"
        title="ç”»ç¬”"
      >
        ğŸ–Œï¸
      </button>
      <button
        class="tool-btn"
        id="eraserBtn"
        onclick="selectTool('eraser')"
        title="æ©¡çš®"
      >
        ğŸ§¹
      </button>

      <div style="width: 2px; height: 40px; background: white"></div>

      <button
        class="color-btn"
        style="background: #ff0000"
        onclick="selectColor('#FF0000', this)"
      ></button>
      <button
        class="color-btn"
        style="background: #ffa500"
        onclick="selectColor('#FFA500', this)"
      ></button>
      <button
        class="color-btn"
        style="background: #ffff00"
        onclick="selectColor('#FFFF00', this)"
      ></button>
      <button
        class="color-btn active"
        style="background: #008000"
        onclick="selectColor('#008000', this)"
      ></button>
      <button
        class="color-btn"
        style="background: #0000ff"
        onclick="selectColor('#0000FF', this)"
      ></button>
      <button
        class="color-btn"
        style="background: #800080"
        onclick="selectColor('#800080', this)"
      ></button>
      <button
        class="color-btn"
        style="background: #ffb6c1"
        onclick="selectColor('#FFB6C1', this)"
      ></button>
      <button
        class="color-btn"
        style="background: #8b4513"
        onclick="selectColor('#8B4513', this)"
      ></button>

      <div style="width: 2px; height: 40px; background: white"></div>

      <div class="brush-size">
        <input
          type="range"
          min="2"
          max="40"
          value="8"
          class="slider"
          id="brushSize"
        />
        <div class="brush-preview" id="brushPreview"></div>
      </div>
    </div>

    <script>
      // å…¨å±€å˜é‡
      let canvas, ctx;
      let isDrawing = false;
      let currentColor = "#008000";
      let brushSize = 8;
      let currentTool = "brush";
      let history = [];
      let historyStep = -1;
      let hasDrawn = false;

      // ç­‰å¾…ç”¨æˆ·ç‚¹å‡»ç”»å¸ƒæ¥æ”¾ç½®å›¾æ¡ˆ
      let pendingShape = null;

      // åˆå§‹åŒ–
      window.onload = function () {
        canvas = document.getElementById("canvas");
        ctx = canvas.getContext("2d");

        resizeCanvas();
        window.addEventListener("resize", resizeCanvas);

        // è®¾ç½®ç”»å¸ƒæ ·å¼
        ctx.lineCap = "round";
        ctx.lineJoin = "round";

        // åˆå§‹åŒ–ç”»ç¬”é¢„è§ˆ
        updateBrushPreview();

        // ç»‘å®šäº‹ä»¶
        canvas.addEventListener("mousedown", startDrawing);
        canvas.addEventListener("mousemove", draw);
        canvas.addEventListener("mouseup", stopDrawing);
        canvas.addEventListener("mouseleave", stopDrawing);

        canvas.addEventListener("touchstart", handleTouch);
        canvas.addEventListener("touchmove", handleTouch);
        canvas.addEventListener("touchend", stopDrawing);

        document
          .getElementById("brushSize")
          .addEventListener("input", function (e) {
            brushSize = parseInt(e.target.value);
            updateBrushPreview();
          });

        // ä¿å­˜åˆå§‹çŠ¶æ€
        saveToHistory();
      };

      function resizeCanvas() {
        const oldData = canvas.toDataURL();
        canvas.width = canvas.offsetWidth;
        canvas.height = canvas.offsetHeight;

        ctx.fillStyle = "#FFFFFF";
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        if (hasDrawn) {
          const img = new Image();
          img.src = oldData;
          img.onload = () => ctx.drawImage(img, 0, 0);
        }

        ctx.lineCap = "round";
        ctx.lineJoin = "round";
      }

      function hideHint() {
        document.getElementById("hint").classList.add("hidden");
      }

      // é€‰æ‹©é¢œè‰²
      function selectColor(color, element) {
        currentColor = color;
        currentTool = "brush";
        document
          .querySelectorAll(".color-btn")
          .forEach((btn) => btn.classList.remove("active"));
        element.classList.add("active");
        updateBrushPreview();

        document.getElementById("brushBtn").classList.add("active");
        document.getElementById("eraserBtn").classList.remove("active");
      }

      // é€‰æ‹©å·¥å…·
      function selectTool(tool) {
        currentTool = tool;
        document
          .getElementById("brushBtn")
          .classList.toggle("active", tool === "brush");
        document
          .getElementById("eraserBtn")
          .classList.toggle("active", tool === "eraser");
      }

      // æ›´æ–°ç”»ç¬”é¢„è§ˆ
      function updateBrushPreview() {
        const preview = document.getElementById("brushPreview");
        const size = Math.max(8, Math.min(brushSize * 1.5, 30));
        preview.style.width = size + "px";
        preview.style.height = size + "px";
        preview.style.backgroundColor = currentColor;
      }

      // è·å–é¼ æ ‡/è§¦æ‘¸ä½ç½®
      function getPosition(e) {
        const rect = canvas.getBoundingClientRect();
        const clientX = e.clientX || (e.touches && e.touches[0]?.clientX);
        const clientY = e.clientY || (e.touches && e.touches[0]?.clientY);
        return {
          x: clientX - rect.left,
          y: clientY - rect.top,
        };
      }

      // å¼€å§‹ç»˜ç”»
      function startDrawing(e) {
        if (pendingShape) return;

        e.preventDefault();
        hideHint();
        hasDrawn = true;
        isDrawing = true;
        const pos = getPosition(e);

        ctx.beginPath();
        ctx.moveTo(pos.x, pos.y);

        if (currentTool === "eraser") {
          ctx.globalCompositeOperation = "destination-out";
        } else {
          ctx.globalCompositeOperation = "source-over";
        }
      }

      // ç»˜ç”»
      function draw(e) {
        if (!isDrawing || pendingShape) return;
        e.preventDefault();

        const pos = getPosition(e);
        ctx.lineWidth = brushSize;
        ctx.strokeStyle = currentColor;
        ctx.lineTo(pos.x, pos.y);
        ctx.stroke();
      }

      // åœæ­¢ç»˜ç”»
      function stopDrawing() {
        if (isDrawing) {
          isDrawing = false;
          ctx.globalCompositeOperation = "source-over";
          saveToHistory();
        }
      }

      // å¤„ç†è§¦æ‘¸äº‹ä»¶
      function handleTouch(e) {
        e.preventDefault();
        if (e.type === "touchstart") {
          startDrawing(e);
        } else if (e.type === "touchmove") {
          draw(e);
        }
      }

      // ä¿å­˜åˆ°å†å²è®°å½•
      function saveToHistory() {
        history = history.slice(0, historyStep + 1);
        history.push(canvas.toDataURL());
        historyStep = history.length - 1;
      }

      // æ’¤é”€
      function undo() {
        if (historyStep > 0) {
          historyStep--;
          const img = new Image();
          img.src = history[historyStep];
          img.onload = () => {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.drawImage(img, 0, 0);
          };
        }
      }

      // é‡åš
      function redo() {
        if (historyStep < history.length - 1) {
          historyStep++;
          const img = new Image();
          img.src = history[historyStep];
          img.onload = () => {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.drawImage(img, 0, 0);
          };
        }
      }

      // æ¸…ç©ºç”»å¸ƒ
      function clearCanvas() {
        ctx.fillStyle = "#FFFFFF";
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        saveToHistory();
        hasDrawn = false;
      }

      // ä¿å­˜å›¾ç‰‡
      function saveDrawing() {
        const link = document.createElement("a");
        link.download = `æˆ‘çš„ç”»ä½œ_${Date.now()}.png`;
        link.href = canvas.toDataURL();
        link.click();
      }

      // ç­‰å¾…ç”¨æˆ·ç‚¹å‡»ç”»å¸ƒæ¥æ”¾ç½®å›¾æ¡ˆ
      function waitForPlacement(shapeFunction) {
        pendingShape = shapeFunction;
        canvas.style.cursor = "pointer";
        canvas.addEventListener("click", placeShape);
      }

      function placeShape(e) {
        if (!pendingShape) return;

        hideHint();
        hasDrawn = true;
        const pos = getPosition(e);
        pendingShape(pos.x, pos.y);

        // æ¸…é™¤ç­‰å¾…çŠ¶æ€
        pendingShape = null;
        canvas.style.cursor = "crosshair";
        canvas.removeEventListener("click", placeShape);
        saveToHistory();
      }

      // ç”»å°ç‹—
      function drawDog(x, y) {
        if (x === undefined) {
          waitForPlacement(drawDog);
          return;
        }

        // èº«ä½“
        ctx.fillStyle = "#D2691E";
        ctx.fillRect(x - 30, y, 60, 50);

        // å¤´
        ctx.beginPath();
        ctx.arc(x, y - 20, 35, 0, Math.PI * 2);
        ctx.fill();

        // è€³æœµ
        ctx.beginPath();
        ctx.ellipse(x - 25, y - 30, 15, 25, -0.3, 0, Math.PI * 2);
        ctx.fill();
        ctx.beginPath();
        ctx.ellipse(x + 25, y - 30, 15, 25, 0.3, 0, Math.PI * 2);
        ctx.fill();

        // çœ¼ç›
        ctx.fillStyle = "#000";
        ctx.beginPath();
        ctx.arc(x - 12, y - 20, 5, 0, Math.PI * 2);
        ctx.fill();
        ctx.beginPath();
        ctx.arc(x + 12, y - 20, 5, 0, Math.PI * 2);
        ctx.fill();

        // é¼»å­
        ctx.fillStyle = "#000";
        ctx.beginPath();
        ctx.arc(x, y - 5, 6, 0, Math.PI * 2);
        ctx.fill();

        // å˜´å·´
        ctx.strokeStyle = "#000";
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.arc(x, y - 5, 10, 0, Math.PI);
        ctx.stroke();

        // è…¿
        ctx.fillStyle = "#D2691E";
        ctx.fillRect(x - 25, y + 50, 15, 30);
        ctx.fillRect(x + 10, y + 50, 15, 30);
      }

      // ç”»å°çŒ«
      function drawCat(x, y) {
        if (x === undefined) {
          waitForPlacement(drawCat);
          return;
        }

        // å¤´
        ctx.fillStyle = "#FFA500";
        ctx.beginPath();
        ctx.arc(x, y, 40, 0, Math.PI * 2);
        ctx.fill();

        // è€³æœµï¼ˆä¸‰è§’å½¢ï¼‰
        ctx.beginPath();
        ctx.moveTo(x - 35, y - 20);
        ctx.lineTo(x - 20, y - 50);
        ctx.lineTo(x - 5, y - 20);
        ctx.closePath();
        ctx.fill();

        ctx.beginPath();
        ctx.moveTo(x + 35, y - 20);
        ctx.lineTo(x + 20, y - 50);
        ctx.lineTo(x + 5, y - 20);
        ctx.closePath();
        ctx.fill();

        // çœ¼ç›
        ctx.fillStyle = "#000";
        ctx.beginPath();
        ctx.arc(x - 15, y - 5, 6, 0, Math.PI * 2);
        ctx.fill();
        ctx.beginPath();
        ctx.arc(x + 15, y - 5, 6, 0, Math.PI * 2);
        ctx.fill();

        // é¼»å­
        ctx.beginPath();
        ctx.moveTo(x, y + 10);
        ctx.lineTo(x - 5, y + 5);
        ctx.lineTo(x + 5, y + 5);
        ctx.closePath();
        ctx.fill();

        // å¾®ç¬‘
        ctx.strokeStyle = "#000";
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.arc(x, y + 15, 12, 0, Math.PI);
        ctx.stroke();

        // èƒ¡é¡»
        ctx.beginPath();
        ctx.moveTo(x - 40, y);
        ctx.lineTo(x - 20, y);
        ctx.moveTo(x - 40, y + 10);
        ctx.lineTo(x - 20, y + 5);
        ctx.moveTo(x + 40, y);
        ctx.lineTo(x + 20, y);
        ctx.moveTo(x + 40, y + 10);
        ctx.lineTo(x + 20, y + 5);
        ctx.stroke();
      }

      // ç”»å°é±¼
      function drawFish(x, y) {
        if (x === undefined) {
          waitForPlacement(drawFish);
          return;
        }

        // èº«ä½“
        ctx.fillStyle = "#4169E1";
        ctx.beginPath();
        ctx.ellipse(x, y, 50, 30, 0, 0, Math.PI * 2);
        ctx.fill();

        // å°¾å·´
        ctx.beginPath();
        ctx.moveTo(x - 50, y);
        ctx.lineTo(x - 80, y - 25);
        ctx.lineTo(x - 80, y + 25);
        ctx.closePath();
        ctx.fill();

        // é±¼é³
        ctx.beginPath();
        ctx.moveTo(x, y - 30);
        ctx.lineTo(x - 10, y - 50);
        ctx.lineTo(x + 10, y - 30);
        ctx.closePath();
        ctx.fill();

        // çœ¼ç›
        ctx.fillStyle = "#FFF";
        ctx.beginPath();
        ctx.arc(x + 25, y - 5, 10, 0, Math.PI * 2);
        ctx.fill();

        ctx.fillStyle = "#000";
        ctx.beginPath();
        ctx.arc(x + 28, y - 5, 5, 0, Math.PI * 2);
        ctx.fill();

        // å˜´å·´
        ctx.strokeStyle = "#000";
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.arc(x + 40, y + 5, 8, 0, Math.PI);
        ctx.stroke();
      }

      // ç”»èŠ±æœµ
      function drawFlower(x, y) {
        if (x === undefined) {
          waitForPlacement(drawFlower);
          return;
        }

        // èŠ±ç“£
        ctx.fillStyle = "#FF69B4";
        for (let i = 0; i < 8; i++) {
          const angle = (Math.PI * 2 * i) / 8;
          ctx.beginPath();
          ctx.arc(
            x + Math.cos(angle) * 30,
            y + Math.sin(angle) * 30,
            20,
            0,
            Math.PI * 2
          );
          ctx.fill();
        }

        // èŠ±å¿ƒ
        ctx.fillStyle = "#FFD700";
        ctx.beginPath();
        ctx.arc(x, y, 20, 0, Math.PI * 2);
        ctx.fill();

        // èŒ
        ctx.strokeStyle = "#228B22";
        ctx.lineWidth = 6;
        ctx.beginPath();
        ctx.moveTo(x, y + 20);
        ctx.lineTo(x, y + 80);
        ctx.stroke();

        // å¶å­
        ctx.fillStyle = "#32CD32";
        ctx.beginPath();
        ctx.ellipse(x - 25, y + 50, 15, 25, -0.5, 0, Math.PI * 2);
        ctx.fill();
        ctx.beginPath();
        ctx.ellipse(x + 25, y + 50, 15, 25, 0.5, 0, Math.PI * 2);
        ctx.fill();
      }

      // ç”»æ ‘
      function drawTree(x, y) {
        if (x === undefined) {
          waitForPlacement(drawTree);
          return;
        }

        // æ ‘å¹²
        ctx.fillStyle = "#8B4513";
        ctx.fillRect(x - 15, y, 30, 80);

        // æ ‘å¶ï¼ˆä¸‰å±‚åœ†å½¢ï¼‰
        ctx.fillStyle = "#228B22";
        ctx.beginPath();
        ctx.arc(x, y - 20, 50, 0, Math.PI * 2);
        ctx.fill();

        ctx.beginPath();
        ctx.arc(x - 30, y - 40, 40, 0, Math.PI * 2);
        ctx.fill();

        ctx.beginPath();
        ctx.arc(x + 30, y - 40, 40, 0, Math.PI * 2);
        ctx.fill();

        ctx.fillStyle = "#32CD32";
        ctx.beginPath();
        ctx.arc(x, y - 60, 45, 0, Math.PI * 2);
        ctx.fill();
      }

      // ç”»æ±½è½¦
      function drawCar(x, y) {
        if (x === undefined) {
          waitForPlacement(drawCar);
          return;
        }

        // è½¦èº«
        ctx.fillStyle = "#FF4444";
        ctx.fillRect(x - 50, y, 100, 40);

        // è½¦é¡¶
        ctx.fillRect(x - 30, y - 30, 60, 30);

        // çª—æˆ·
        ctx.fillStyle = "#87CEEB";
        ctx.fillRect(x - 25, y - 25, 20, 20);
        ctx.fillRect(x + 5, y - 25, 20, 20);

        // è½¦è½®
        ctx.fillStyle = "#333";
        ctx.beginPath();
        ctx.arc(x - 30, y + 40, 15, 0, Math.PI * 2);
        ctx.fill();
        ctx.beginPath();
        ctx.arc(x + 30, y + 40, 15, 0, Math.PI * 2);
        ctx.fill();

        // è½®æ¯‚
        ctx.fillStyle = "#999";
        ctx.beginPath();
        ctx.arc(x - 30, y + 40, 8, 0, Math.PI * 2);
        ctx.fill();
        ctx.beginPath();
        ctx.arc(x + 30, y + 40, 8, 0, Math.PI * 2);
        ctx.fill();
      }

      // ç”»å¤ªé˜³
      function drawSun(x, y) {
        if (x === undefined) {
          waitForPlacement(drawSun);
          return;
        }

        // å¤ªé˜³åœ†ç›˜
        ctx.fillStyle = "#FFA500";
        ctx.beginPath();
        ctx.arc(x, y, 40, 0, Math.PI * 2);
        ctx.fill();

        // å…‰èŠ’
        ctx.strokeStyle = "#FFA500";
        ctx.lineWidth = 5;
        for (let i = 0; i < 12; i++) {
          const angle = (Math.PI * 2 * i) / 12;
          ctx.beginPath();
          ctx.moveTo(x + Math.cos(angle) * 50, y + Math.sin(angle) * 50);
          ctx.lineTo(x + Math.cos(angle) * 70, y + Math.sin(angle) * 70);
          ctx.stroke();
        }
      }

      // ç”»æˆ¿å­
      function drawHouse(x, y) {
        if (x === undefined) {
          waitForPlacement(drawHouse);
          return;
        }

        // å¢™å£
        ctx.fillStyle = "#D2B48C";
        ctx.fillRect(x - 50, y, 100, 80);

        // å±‹é¡¶
        ctx.fillStyle = "#8B0000";
        ctx.beginPath();
        ctx.moveTo(x - 60, y);
        ctx.lineTo(x, y - 50);
        ctx.lineTo(x + 60, y);
        ctx.closePath();
        ctx.fill();

        // é—¨
        ctx.fillStyle = "#654321";
        ctx.fillRect(x - 15, y + 30, 30, 50);

        // çª—æˆ·
        ctx.fillStyle = "#87CEEB";
        ctx.fillRect(x - 40, y + 20, 20, 20);
        ctx.fillRect(x + 20, y + 20, 20, 20);

        // çª—æ ¼
        ctx.strokeStyle = "#333";
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(x - 30, y + 20);
        ctx.lineTo(x - 30, y + 40);
        ctx.moveTo(x - 40, y + 30);
        ctx.lineTo(x - 20, y + 30);
        ctx.moveTo(x + 30, y + 20);
        ctx.lineTo(x + 30, y + 40);
        ctx.moveTo(x + 20, y + 30);
        ctx.lineTo(x + 40, y + 30);
        ctx.stroke();
      }

      // ç”»ç«ç®­
      function drawRocket(x, y) {
        if (x === undefined) {
          waitForPlacement(drawRocket);
          return;
        }

        // ç«ç®­ä¸»ä½“
        ctx.fillStyle = "#C0C0C0";
        ctx.fillRect(x - 20, y, 40, 80);

        // ç«ç®­å¤´
        ctx.fillStyle = "#FF0000";
        ctx.beginPath();
        ctx.moveTo(x - 20, y);
        ctx.lineTo(x, y - 40);
        ctx.lineTo(x + 20, y);
        ctx.closePath();
        ctx.fill();

        // çª—å£
        ctx.fillStyle = "#87CEEB";
        ctx.beginPath();
        ctx.arc(x, y + 30, 12, 0, Math.PI * 2);
        ctx.fill();

        // ç¿…è†€
        ctx.fillStyle = "#FF4444";
        ctx.beginPath();
        ctx.moveTo(x - 20, y + 50);
        ctx.lineTo(x - 40, y + 80);
        ctx.lineTo(x - 20, y + 80);
        ctx.closePath();
        ctx.fill();

        ctx.beginPath();
        ctx.moveTo(x + 20, y + 50);
        ctx.lineTo(x + 40, y + 80);
        ctx.lineTo(x + 20, y + 80);
        ctx.closePath();
        ctx.fill();

        // ç«ç„°
        ctx.fillStyle = "#FF6600";
        ctx.beginPath();
        ctx.moveTo(x - 15, y + 80);
        ctx.lineTo(x - 10, y + 100);
        ctx.lineTo(x, y + 90);
        ctx.closePath();
        ctx.fill();

        ctx.beginPath();
        ctx.moveTo(x, y + 80);
        ctx.lineTo(x, y + 105);
        ctx.lineTo(x + 10, y + 90);
        ctx.closePath();
        ctx.fill();

        ctx.beginPath();
        ctx.moveTo(x + 15, y + 80);
        ctx.lineTo(x + 10, y + 100);
        ctx.lineTo(x, y + 90);
        ctx.closePath();
        ctx.fill();

        ctx.fillStyle = "#FFFF00";
        ctx.beginPath();
        ctx.moveTo(x - 8, y + 80);
        ctx.lineTo(x - 5, y + 95);
        ctx.lineTo(x, y + 85);
        ctx.closePath();
        ctx.fill();

        ctx.beginPath();
        ctx.moveTo(x + 8, y + 80);
        ctx.lineTo(x + 5, y + 95);
        ctx.lineTo(x, y + 85);
        ctx.closePath();
        ctx.fill();
      }

      // ç”»å²è’‚å¤«ï¼ˆæˆ‘çš„ä¸–ç•Œï¼‰
      function drawSteve(x, y) {
        if (x === undefined) {
          waitForPlacement(drawSteve);
          return;
        }

        // å¤´éƒ¨
        ctx.fillStyle = "#D2A679";
        ctx.fillRect(x - 20, y - 40, 40, 40);

        // å¤´å‘
        ctx.fillStyle = "#5C4033";
        ctx.fillRect(x - 20, y - 40, 40, 10);

        // çœ¼ç›
        ctx.fillStyle = "#87CEEB";
        ctx.fillRect(x - 14, y - 25, 8, 8);
        ctx.fillRect(x + 6, y - 25, 8, 8);

        ctx.fillStyle = "#000";
        ctx.fillRect(x - 10, y - 23, 4, 6);
        ctx.fillRect(x + 10, y - 23, 4, 6);

        // å˜´å·´
        ctx.fillStyle = "#8B4513";
        ctx.fillRect(x - 8, y - 8, 16, 3);

        // èº«ä½“
        ctx.fillStyle = "#4A90E2";
        ctx.fillRect(x - 20, y, 40, 40);

        // æ‰‹è‡‚
        ctx.fillStyle = "#D2A679";
        ctx.fillRect(x - 30, y, 10, 35);
        ctx.fillRect(x + 20, y, 10, 35);

        // è…¿
        ctx.fillStyle = "#2C5AA0";
        ctx.fillRect(x - 15, y + 40, 12, 30);
        ctx.fillRect(x + 3, y + 40, 12, 30);

        // é‹å­
        ctx.fillStyle = "#333";
        ctx.fillRect(x - 15, y + 65, 12, 5);
        ctx.fillRect(x + 3, y + 65, 12, 5);
      }

      // ç”»è‹¦åŠ›æ€•ï¼ˆCreeperï¼‰
      function drawCreeper(x, y) {
        if (x === undefined) {
          waitForPlacement(drawCreeper);
          return;
        }

        // å¤´éƒ¨
        ctx.fillStyle = "#0D9E0D";
        ctx.fillRect(x - 25, y - 50, 50, 50);

        // çœ¼ç›
        ctx.fillStyle = "#000";
        ctx.fillRect(x - 18, y - 40, 10, 10);
        ctx.fillRect(x + 8, y - 40, 10, 10);

        // å˜´å·´ï¼ˆæ ‡å¿—æ€§çš„è„¸ï¼‰
        ctx.fillRect(x - 5, y - 25, 10, 10);
        ctx.fillRect(x - 15, y - 15, 10, 10);
        ctx.fillRect(x + 5, y - 15, 10, 10);
        ctx.fillRect(x - 5, y - 5, 10, 5);

        // èº«ä½“
        ctx.fillStyle = "#0D9E0D";
        ctx.fillRect(x - 20, y, 40, 40);

        // è…¿
        ctx.fillRect(x - 18, y + 40, 12, 25);
        ctx.fillRect(x + 6, y + 40, 12, 25);

        // åƒç´ åŒ–çš„é˜´å½±æ•ˆæœ
        ctx.fillStyle = "#0A7A0A";
        ctx.fillRect(x - 25, y - 50, 5, 50);
        ctx.fillRect(x - 20, y, 5, 40);
      }

      // ç”»é’»çŸ³
      function drawDiamond(x, y) {
        if (x === undefined) {
          waitForPlacement(drawDiamond);
          return;
        }

        // é’»çŸ³ä¸»ä½“
        ctx.fillStyle = "#00CED1";
        ctx.beginPath();
        ctx.moveTo(x, y - 30);
        ctx.lineTo(x - 25, y);
        ctx.lineTo(x, y + 30);
        ctx.lineTo(x + 25, y);
        ctx.closePath();
        ctx.fill();

        // é«˜å…‰æ•ˆæœ
        ctx.fillStyle = "#7FFFD4";
        ctx.beginPath();
        ctx.moveTo(x, y - 30);
        ctx.lineTo(x - 15, y - 10);
        ctx.lineTo(x, y);
        ctx.closePath();
        ctx.fill();

        // é˜´å½±æ•ˆæœ
        ctx.fillStyle = "#008B8B";
        ctx.beginPath();
        ctx.moveTo(x, y);
        ctx.lineTo(x - 25, y);
        ctx.lineTo(x, y + 30);
        ctx.closePath();
        ctx.fill();

        // è½®å»“
        ctx.strokeStyle = "#006B6B";
        ctx.lineWidth = 3;
        ctx.beginPath();
        ctx.moveTo(x, y - 30);
        ctx.lineTo(x - 25, y);
        ctx.lineTo(x, y + 30);
        ctx.lineTo(x + 25, y);
        ctx.closePath();
        ctx.stroke();

        // å†…éƒ¨çº¿æ¡
        ctx.beginPath();
        ctx.moveTo(x, y - 30);
        ctx.lineTo(x, y + 30);
        ctx.moveTo(x - 25, y);
        ctx.lineTo(x + 25, y);
        ctx.stroke();
      }

      // ç”»è‰æ–¹å—
      function drawGrass(x, y) {
        if (x === undefined) {
          waitForPlacement(drawGrass);
          return;
        }

        // æ–¹å—å¤§å°
        const size = 50;

        // é¡¶é¢ï¼ˆè‰ï¼‰
        ctx.fillStyle = "#7CBD3E";
        ctx.fillRect(x - size / 2, y - size, size, size / 3);

        // ä¾§é¢ï¼ˆæ³¥åœŸï¼‰
        ctx.fillStyle = "#9B7653";
        ctx.fillRect(x - size / 2, y - (size * 2) / 3, size, (size * 2) / 3);

        // åƒç´ åŒ–çº¹ç†
        ctx.fillStyle = "#6BA836";
        for (let i = 0; i < 8; i++) {
          const px = x - size / 2 + (i * size) / 8;
          const py = y - size + Math.random() * 10;
          ctx.fillRect(px, py, size / 8, 3);
        }

        // æ³¥åœŸçº¹ç†
        ctx.fillStyle = "#8B6F47";
        for (let i = 0; i < 5; i++) {
          for (let j = 0; j < 5; j++) {
            if (Math.random() > 0.5) {
              ctx.fillRect(
                x - size / 2 + i * 10,
                y - (size * 2) / 3 + j * 6,
                8,
                5
              );
            }
          }
        }

        // æ–¹å—è½®å»“
        ctx.strokeStyle = "#000";
        ctx.lineWidth = 2;
        ctx.strokeRect(x - size / 2, y - size, size, size);
      }

      // ç”»TNT
      function drawTNT(x, y) {
        if (x === undefined) {
          waitForPlacement(drawTNT);
          return;
        }

        const size = 50;

        // TNTä¸»ä½“
        ctx.fillStyle = "#FF0000";
        ctx.fillRect(x - size / 2, y - size, size, size);

        // ç™½è‰²æ¡çº¹
        ctx.fillStyle = "#FFF";
        ctx.fillRect(x - size / 2, y - size + 10, size, 10);
        ctx.fillRect(x - size / 2, y - size + 30, size, 10);

        // TNT æ–‡å­—
        ctx.fillStyle = "#000";
        ctx.font = "bold 20px Arial";
        ctx.textAlign = "center";
        ctx.textBaseline = "middle";
        ctx.fillText("TNT", x, y - size / 2);

        // å¼•çº¿
        ctx.strokeStyle = "#333";
        ctx.lineWidth = 4;
        ctx.beginPath();
        ctx.moveTo(x, y - size);
        ctx.lineTo(x - 10, y - size - 20);
        ctx.stroke();

        // ç«èŠ±
        ctx.fillStyle = "#FF6600";
        ctx.beginPath();
        ctx.arc(x - 10, y - size - 20, 6, 0, Math.PI * 2);
        ctx.fill();

        ctx.fillStyle = "#FFFF00";
        ctx.beginPath();
        ctx.arc(x - 10, y - size - 20, 3, 0, Math.PI * 2);
        ctx.fill();
      }

      // ç”»é’»çŸ³å‰‘
      function drawSword(x, y) {
        if (x === undefined) {
          waitForPlacement(drawSword);
          return;
        }

        // å‰‘åˆƒ
        ctx.fillStyle = "#00CED1";
        ctx.fillRect(x - 8, y - 80, 16, 70);

        // å‰‘å°–
        ctx.beginPath();
        ctx.moveTo(x - 8, y - 80);
        ctx.lineTo(x, y - 95);
        ctx.lineTo(x + 8, y - 80);
        ctx.closePath();
        ctx.fill();

        // å‰‘åˆƒé«˜å…‰
        ctx.fillStyle = "#7FFFD4";
        ctx.fillRect(x - 5, y - 75, 4, 65);

        // æŠ¤æ‰‹
        ctx.fillStyle = "#8B4513";
        ctx.fillRect(x - 20, y - 10, 40, 8);

        // å‰‘æŸ„
        ctx.fillStyle = "#654321";
        ctx.fillRect(x - 6, y - 2, 12, 25);

        // å‰‘æŸ„çº¹ç†
        ctx.fillStyle = "#8B6F47";
        ctx.fillRect(x - 6, y + 3, 12, 3);
        ctx.fillRect(x - 6, y + 10, 12, 3);
        ctx.fillRect(x - 6, y + 17, 12, 3);

        // å‰‘æŸ„åº•éƒ¨
        ctx.fillStyle = "#DAA520";
        ctx.fillRect(x - 8, y + 23, 16, 5);
      }
    </script>
  </body>
</html>
